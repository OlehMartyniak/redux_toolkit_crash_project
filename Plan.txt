–ú–µ—Ç–∞ - —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫, —è–∫–∏–π –±—É–¥–µ –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ—Å—Ç–∏, –ø—Ä–∏–π–º–∞—Ç–∏ –Ω–æ–≤—ñ –ø–æ—Å—Ç–∏, –º–∞—Ç–∏–º–µ —Ä–µ–∞–∫—Ü—ñ—ó –Ω–∞ –ø–æ—Å—Ç–∏,
—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç—É —Ç–∞ —á–∞—Å –∫–æ–ª–∏ –≤—ñ–Ω –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π.

–ü–µ—Ä—à–∏–º –¥—ñ–ª–æ–º –Ω–∞–ø–∏—à–µ–º–æ –∫–æ–¥, —è–∫–∏–π –≤–∏–≤–æ–¥–∏—Ç–∏–º–µ –Ω–∞—à—ñ –ø–æ—Å—Ç–∏.

–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ react-redux i @reduxjs/toolkit, —Å—Ç–≤–æ—Ä–∏—Ç–∏ store (configureStore) i –æ–±–≥–æ—Ä–Ω—É—Ç–∏ App –≤ Provider;

–°—Ç–≤–æ—Ä–∏—Ç–∏ postsSlice —ñ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–≥–æ –≤ store (configureStore) :

            const initialState = [
                {id: '1', title: 'Learning Redux Toolkit', content: 'I`ve heard good things'},
                {id: '2', title: 'Slices...', content: 'The more I say slice, the more I want pizza'}
            ];

            const postsSlice = createSlice({
                name: 'posts',
                initialState,
                reducers: {}
            });

            const selectAllPosts = (state)=> state.posts;
            const {reducer:postsReducer} = postsSlice;

            export {postsReducer,selectAllPosts};         

–°—Ç–≤–æ—Ä–∏–º–æ PostsList, –¥–µ –º–∏ –±—É–¥–µ–º–æ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑—ñ store (useSelector), –¥–µ –±—É–¥–µ —à–∞–±–ª–æ–Ω –ø–æ—Å—Ç—ñ–≤ —è–∫—ñ –º–∏ –≤–∏–≤–æ–¥–∏–º–æ - renderedPost(<article/>) i –∫—É–¥–∏ –≤–ª–∞—Å–Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏–º–µ–º–æ —ó—Ö. –í–∏–∫–ª–∏—á–µ–º–æ –π–æ–≥–æ –≤ App :

            const PostsList = () => {

                const posts = useSelector(selectAllPosts);

                const renderePosts = posts.map(post => (
                    <article key={post.id}>
                        <h3>{post.title}</h3>
                        <p>{post.content.substring(0,100)}</p>
                    </article>
                ))

            return (
                <section>
                    <h2>Posts</h2>
                    {renderePosts}
                </section>
            )
            }

            export default PostsList;

–¢–∞–∫–∏–º —á–∏–Ω–æ–º –º–∏ –Ω–∞–ø–∏—Å–∞–ª–∏ –∫–æ–¥, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –Ω–∞–º –≤–∏–≤–æ–¥–∏—Ç–∏ –ø–æ—Å—Ç–∏.
–¢–µ–ø–µ—Ä –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏ –ø–æ—Å—Ç–∏ –∑ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ–æ—Ä–º–∏.
–ê–ª–µ —Å–ø–æ—á–∞—Ç–∫—É —Ç—Ä–µ–±–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –∑ –¥–∞–Ω–∏–º–∏, —è–∫—ñ –º–∏ –Ω–∞–¥—Å–∏–ª–∞—î–º–æ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É.   

–î–ª—è —Ü—å–æ–≥–æ –≤ postsSlice –≤ reducers –¥–æ–¥–∞–º–æ :

            reducers: {
                    postAdded(state,action) {
                        state.push(action.payload)
                    }
                }

            const {reducer:postsReducer, actions:postAdded} = postsSlice;

postAdded –ø—Ä–∏–π–º–∞—Ç–∏–º–µ –Ω–∞—à state —ñ action –≤ –º–∞—Å–∏–≤ –Ω–∞—à–æ–≥–æ state
            
–¢–∞–∫–æ–∂ –æ–ø–∏—à–µ–º–æ –Ω–∞—à—É —Ñ–æ—Ä–º—É —ñ –ª–æ–≥—ñ–∫—É, —è–∫–∞ —Ç–∞–º –±—É–¥–µ –≤—ñ–¥–±—É–≤–∞—Ç–∏—Å—å (–∑–º—ñ–Ω–Ω—ñ title i content, —è–∫—ñ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—å
—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –∑ —Ñ–æ—Ä–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é useState i —ñ–≤–µ–Ω—Ç–∏ onTitleChange i onContentChange, —è–∫—ñ –±—É–¥—É—Ç—å –≤—ñ–¥—Ö–æ–ø–ª—é–≤–∞—Ç–∏ 
—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏ —ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –≤ setTitle i setContent), –∞ —Ç–∞–∫–æ–∂ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ñ–æ—Ä–º–∏, —ñ –∫–Ω–æ–ø–∫—É onSavePostClicked, —è–∫–∞ –±—É–¥–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —á–∏ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ —É –Ω–∞—Å —Ñ–æ—Ä–º–∏ ( if(title && content) ) —ñ —è–∫—â–æ —Ç–∞–∫, —Ç–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏–º–µ (dispatch) –≤ –Ω–∞—à slice –∑ –¥–æ–ø–æ–º–æ–≥–æ—é action (postAdded) –Ω–æ–≤–∏–π –ø–æ—Å—Ç (id —Å—Ñ–æ—Ä–º—É—î–º–æ –∑ –¥–æ–ø. —Ñ-—Ü—ñ—ó nanoid()):

            const AddPostForm = () => {
            const [title, setTitle] = useState("");
            const [content, setContent] = useState("");

            const onTitleChanged = (e) => setTitle(e.target.value);
            const onContentChanged = (e) => setContent(e.target.value);

            const dispatch = useDispatch();

            const onSavePostClicked = ()=> {
                if(title && content) {
                    dispatch(
                        postAdded({
                            id: nanoid(),
                            title,
                            content
                        })
                    )
                }
            }

            return (
                <section>
                <h2>Add a New Post</h2>
                <form>

                    <label htmlFor="postTitle">Post Title:</label>
                    <input
                    type="text"
                    id="postTitle"
                    name="postTitle"
                    value={title}
                    onChange={onTitleChanged}
                    />

                    <label htmlFor="postContent">Content:</label>
                    <textarea
                    id="postContent"
                    name="postContent"
                    value={content}
                    onChange={onContentChanged}
                    />

                    <button
                        type="button"
                        onClick={onSavePostClicked}
                    >Save Post</button>
                </form>
                </section>
            );
            };

–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ userSlice, –∞–±–∏ –º–∏ –º–æ–≥–ª–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞:

            const initialState = [
                {id:'0',name:'Dude Lebowski'},
                {id:'1',name:'Neil Young'},
                {id:'2',name:'Dave Gray'}
            ];
            const usersSlice = createSlice({
                name: 'users',
                initialState,
                reducers: {}
            });

            const selectAllUsers = (state) => state.users;
            const {reducer: usersReducer} = usersSlice;

            export {selectAllUsers,usersReducer};

–Ü –¥–æ–¥–∞–º–æ –¥–æ–¥–∞—Ç–∫–æ–≤—É –ª–æ–≥—ñ–∫—É –≤ AddPostForm:

            const [userId,setUserId] = useState("");
            const users = useSelector(selectAllUsers);
            const onAuthorChandeg = (e) => setUserId(e.target.value);
            userId –≤ postAdded

            const usersOptions = users.map(user => (
                <option key={user.id} value={user.id}>
                    {user.name}
                </option>
            ))

–¢–∞–º –∂–µ –∂ –¥–æ–¥–∞–º–æ —Ä–æ–∑–º—ñ—Ç–∫—É –≤ return: 

            <label htmlFor="postAuthor">Author:</label>
                    <select
                        id="postAuthor"
                        value={userId}
                        onChange={onAuthorChandeg}>
                        <option value=""></option>
                        {usersOptions}
                    </select>

–¢–∞–∫–æ–∂ –¥–æ–¥–∞–º–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —á–∏ –≤—Å—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ:

            const canSave = Boolean(title) && Boolean(content) && Boolean(userId);

–Ü –ø–µ—Ä–µ–¥–∞–º–æ —Ü–µ –≤ —è–∫–æ—Å—Ç—ñ –∑–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä disabled –≤ –Ω–∞—à button:

            <button
                type="button"
                onClick={onSavePostClicked}
    --->        disabled={!canSave}
            >Save Post</button>

–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ PostAuthor, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∑–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞ : 

            const PostAuthor = ({userId})=> {

                const users = useSelector(selectAllUsers);
                const author = users.find(user => user.id === userId);

                return (
                    <span>by {author ? author.name : 'Unknown author'}</span>
                )
            };

–Ü –≤ PostsList, –¥–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —Ä–µ–Ω–¥–µ—Ä —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ–∂–µ–Ω –ø–æ—Å—Ç –≤ renderePosts –¥–æ–¥–∞–º–æ –ø–æ–ª–µ –∑ —ñ–Ω—Ñ–æ—é –ø—Ä–æ –∞–≤—Ç–æ—Ä–∞:

            <p className='postCredit'>
                <PostAuthor userId={post.userId}/>
            </p>

–¢–µ–ø–µ—Ä –∑—Ä–æ–±–∏–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ –∫–æ–ª–∏ –±—É–≤ –∑—Ä–æ–±–ª–µ–Ω–∏–π –ø–æ—Å—Ç. –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏:

            npm i date-fns

–î–ª—è –≤–∂–µ –≥–æ—Ç–æ–≤–∏—Ö –ø–æ—Å—Ç—ñ–≤ –≤ initialState –≤ postsSlice –¥–æ–¥–∞–º–æ date:

            {
                id: "1",
                title: "Learning Redux Toolkit",
                content: "I`ve heard good things",
    --->        date: sub(new Date(), { minutes: 10 }).toISOString(),
            }

–Ü —Ç–∞–∫–æ–∂ –¥–æ–¥–∞–º–æ  date –≤ postAdded (–∫–Ω–æ–ø–∫–∞ onSavePostClicked), –∞–±–∏ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —á–∞—Å –¥–ª—è –Ω–æ–≤–∏—Ö –ø–æ—Å—Ç—ñ–≤:

            postAdded({
                id: nanoid(),
                title,
                content,
                userId,
    --->        date: new Date().toISOString()
            })

–°—Ç–≤–æ—Ä–∏–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç TimeAgo.js :

            const TimeAgo = ({ timestamp }) => {
            let timeAgo = "";

            if (timestamp) {
                const date = parseISO(timestamp);
                const timePeriod = formatDistanceToNow(date);
                timeAgo = `${timePeriod} ago`;
            }

            return (
                <span title={timestamp}>
                &nbsp; <i>{timeAgo}</i>
                </span>
            );
            };

–Ü —Ç–µ–ø–µ—Ä –≤ renderedPost –ø–æ—Ä—É—á –∑ –∞–≤—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–∞ (PostAuthor) –¥–æ–¥–∞–º–æ —á–∞—Å:

            <p className="postCredit">
                <PostAuthor userId={post.userId} />
    --->            <TimeAgo timestamp={post.date} />
            </p>

–¢–µ–ø–µ—Ä —â–æ–± —Å–æ—Ä—Ç—É–≤–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É –Ω–æ–≤—ñ –ø–æ—Å—Ç–∏ –∞ –ø–æ—Ç—ñ–º —Å—Ç–∞—Ä—ñ, –≤ PostsList —Å—Ç–≤–æ—Ä–∏–º–æ:

            const orderedPosts = posts.slice().sort((a,b) => b.date.localeCompare(a.date));

–Ü —Ç–µ–ø–µ—Ä –≤ —Ç–æ–º—É –∂ PostsList > renderePosts –±—É–¥–µ–º–æ –º–∞–ø–∞—Ç–∏ –Ω–µ posts, a  orderedPosts:

            const renderePosts = orderedPosts.map((post) => ...

–¢–µ–ø–µ—Ä –¥–æ–¥–∞–º–æ –µ–º–æ–¥–∑—ñ –¥–ª—è —Ä–µ–∞–∫—Ü—ñ—ó –Ω–∞ –ø–æ—Å—Ç–∏.
–î–æ–¥–∞–º–æ –æ–±—î–∫—Ç –µ–º–æ–¥–∑—ñ –¥–ª—è –Ω–∞—à–∏—Ö —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –ø–æ—Å—Ç—ñ–≤ —ñ –≤ —Ñ—É–Ω–∫—Ü—ñ—é postAdded —Ñ—É–Ω–∫—Ü—ñ—ó onSavePostClicked:

                reactions: {
                    thumbsUp: 0,
                    wow: 0,
                    heart: 0,
                    rocket: 0,
                    coffee: 0
                }

–î–∞–ª—ñ –≤ postsSlice > reducers –¥–æ–¥–∞–º–æ –Ω–æ–≤–∏–π —Ä–µ–¥—é—Å–µ—Ä = reactionAdded (—ñ –µ–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –π–æ–≥–æ):

                reactionAdded(state,action) {
                    const {postId,reaction} = action.payload;
                    const existingPost = state.find(post => post.id === postId);
                    if(existingPost) {
                        existingPost.reactions[reaction]++
                    }
–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –µ–º–æ–¥–∑—ñ - ReactionButtons:

            const reactionEmoji = {
                thumbsUp: 'üëç',
                wow: 'üòÆ',
                heart: '‚ù§Ô∏è',
                rocket: 'üöÄ',
                coffee: '‚òï'
            };

            const ReactionButtons = ({post}) => {
                const dispatch = useDispatch();

                const reactionButtons = Object.entries(reactionEmoji).map(([name, emoji]) => {
                    return (
                        <button
                            key={name}
                            type='button'
                            className="reactionButton"
                            onClick={()=> {
                                dispatch(reactionAdded({postId: post.id, reaction: name}))
                            }}
                        >
                            {emoji} {post.reaction[name]}
                        </button>
                    )
                })
                return <div>{reactionButtons}</div>
            };

–Ü –æ—Å—Ç–∞–Ω–Ω—î - –≤ PostsList –≤ –∫—ñ–Ω—Ü—ñ renderePosts –≤–∏–∫–ª–∏—á–µ–º–æ –Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç  ReactionButtons:

            const renderePosts = orderedPosts.map((post) => (
                <article key={post.id}>
                <h3>{post.title}</h3>
                <p>{post.content.substring(0, 100)}</p>
                <p className="postCredit">
                    <PostAuthor userId={post.userId} />
                    <TimeAgo timestamp={post.date} />
                </p>
                <ReactionButtons post={post}/>
                </article> 
            ));
